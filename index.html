<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trade Army | Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* DOKUNMATİK HASSASİYETİ İÇİN KRİTİK AYARLAR */
        * { 
            -webkit-tap-highlight-color: transparent; 
            touch-action: manipulation; 
        }
        
        body, html { 
            background-color: #0c0d10; 
            color: #d1d4dc; 
            overflow: hidden !important; /* Sayfa kaymasını engelle ki sadece grafik hareket etsin */
            height: 100%; 
            width: 100%;
            margin: 0; 
        }

        #chart-grid { flex: 1; display: grid; background-color: #1e222d; }
        .grid-1 { grid-template-columns: 1fr; }
        
        /* Çizim araçlarının üzerine binen görünmez engelleri kaldırır */
        iframe { 
            pointer-events: auto !important; 
            touch-action: auto !important;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Telefon Görünümü Ayarları */
        @media (max-width: 768px) {
            .pc-only { display: none !important; }
            .mobile-bottom-nav { display: flex !important; }
        }

        .m-nav-btn { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 10px; color: #81858e; font-weight: bold; }
    </style>
</head>
<body class="flex flex-col">

    <header class="h-12 border-b border-[#1e222d] bg-[#131722] flex items-center justify-between px-4 shrink-0">
        <span class="text-blue-500 font-black italic text-lg uppercase tracking-tighter">Trade <span class="text-white">Army</span></span>
        <div class="text-[10px] text-gray-500 font-mono" id="asset-label">BINANCE:BTCUSDT</div>
    </header>

    <main id="chart-grid" class="grid-1">
        <div id="tv_chart_main" class="w-full h-full"></div>
    </main>

    <nav class="mobile-bottom-nav h-14 border-t border-[#1e222d] bg-[#131722] hidden shrink-0">
        <button onclick="updateSymbol('BINANCE:BTCUSDT')" class="m-nav-btn">BTC</button>
        <button onclick="updateSymbol('BINANCE:ETHUSDT')" class="m-nav-btn">ETH</button>
        <button onclick="updateSymbol('TVC:GOLD')" class="m-nav-btn">ALTIN</button>
        <button onclick="updateSymbol('FX:USDTRY')" class="m-nav-btn">DOLAR</button>
    </nav>

    <footer class="h-6 bg-[#0c0d10] border-t border-gray-900 flex items-center justify-between px-4 text-[8px] text-gray-600 shrink-0">
        <div>© 2026 Trade Army</div>
        <div>Yatırım tavsiyesi değildir.</div>
    </footer>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        function initChart(symbol) {
            new TradingView.widget({
                "autosize": true,
                "symbol": symbol,
                "interval": "240",
                "timezone": "Etc/UTC",
                "theme": "dark",
                "style": "1",
                "locale": "tr",
                "toolbar_bg": "#131722",
                "enable_publishing": false,
                "hide_side_toolbar": false, // Çizim araçları burada açılıyor
                "allow_symbol_change": true,
                "save_image": true,
                "container_id": "tv_chart_main",
                "withdateranges": true,
                // DOKUNMATİK ÇİZİM İÇİN KRİTİK ÖZELLİKLER
                "enabled_features": [
                    "header_resolutions", 
                    "header_indicators", 
                    "header_settings", 
                    "header_symbol_search",
                    "side_toolbar_in_fullscreen_mode",
                    "header_chart_type",
                    "mouse_wheel_scale", // PC'de tekerlek ile zoom
                    "use_localstorage_for_settings_save"
                ],
                "overrides": {
                    "paneProperties.background": "#131722",
                    "mainSeriesProperties.style": 1
                }
            });
        }

        function updateSymbol(s) {
            document.getElementById('asset-label').innerText = s;
            initChart(s);
        }

        // İlk açılış
        window.onload = () => initChart('BINANCE:BTCUSDT');
    </script>
</body>
</html>
