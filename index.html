<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trading Terminal</title>

<style>
html,body{
  margin:0;
  padding:0;
  background:#000;
  height:100%;
  font-family:Arial,sans-serif;
  overflow:hidden;
}

/* TOP BAR */
#topbar{
  position:fixed;
  top:0;
  width:100%;
  background:#111;
  z-index:1000;
  padding:6px;
}

#layouts{
  display:flex;
  gap:6px;
}

button{
  flex:1;
  padding:8px;
  background:#000;
  color:#0f0;
  border:1px solid #333;
}

/* GRID */
#grid{
  display:grid;
  width:100vw;
  height:calc(100vh - 50px);
  margin-top:50px;
}

.chart{
  border:1px solid #222;
  cursor:pointer;
}

/* MODAL */
#modal{
  display:none;
  position:fixed;
  inset:0;
  background:#000;
  z-index:9999;
}

#modal iframe{
  width:100%;
  height:100%;
  border:none;
}

#close{
  position:absolute;
  top:10px;
  right:10px;
  background:red;
  color:#fff;
  padding:8px 12px;
  z-index:10000;
}

/* MOBILE */
@media(max-width:768px){
  #grid{
    grid-template-columns:1fr;
    grid-template-rows:repeat(4,1fr);
  }
}
</style>
</head>

<body>

<div id="topbar">
  <div id="layouts">
    <button onclick="setLayout(1)">1</button>
    <button onclick="setLayout(2)">2</button>
    <button onclick="setLayout(3)">3</button>
    <button onclick="setLayout(4)">4</button>
  </div>
</div>

<div id="grid">
  <div class="chart" id="tv1" onclick="openFull()"></div>
  <div class="chart" id="tv2" onclick="openFull()"></div>
  <div class="chart" id="tv3" onclick="openFull()"></div>
  <div class="chart" id="tv4" onclick="openFull()"></div>
</div>

<div id="modal">
  <div id="close" onclick="closeFull()">KAPAT</div>
  <iframe id="iframe"></iframe>
</div>

<script src="https://s3.tradingview.com/tv.js"></script>
<script>
const symbols=[
 "BINANCE:BTCUSDT",
 "BINANCE:ETHUSDT",
 "OANDA:EURUSD",
 "OANDA:US100USD"
];

function load(id,symbol){
 new TradingView.widget({
  autosize:true,
  symbol:symbol,
  interval:"15",
  theme:"dark",
  container_id:id
 });
}

load("tv1",symbols[0]);
load("tv2",symbols[1]);
load("tv3",symbols[2]);
load("tv4",symbols[3]);

function setLayout(n){
 const g=document.getElementById("grid");
 if(n==1){
  g.style.gridTemplateColumns="1fr";
  g.style.gridTemplateRows="1fr";
 }else if(n==2){
  g.style.gridTemplateColumns="1fr 1fr";
  g.style.gridTemplateRows="1fr";
 }else{
  g.style.gridTemplateColumns="1fr 1fr";
  g.style.gridTemplateRows="1fr 1fr";
 }
 [1,2,3,4].forEach(i=>{
  document.getElementById("tv"+i).style.display=i<=n?"block":"none";
 });
}

function openFull(){
 document.getElementById("iframe").src="https://www.tradingview.com/chart/";
 document.getElementById("modal").style.display="block";
}

function closeFull(){
 document.getElementById("modal").style.display="none";
 document.getElementById("iframe").src="";
}

setLayout(4);
</script>

</body>
</html>
