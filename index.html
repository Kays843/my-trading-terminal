<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRADE ARMY V1 | FULL PRO TERMINAL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html, body { background: #08090d; margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; color: #d1d4dc; font-family: sans-serif; }
        #chart-grid { display: grid; height: 100%; width: 100%; gap: 1px; background: #1e222d; }
        @media (min-width: 768px) { .grid-1 { grid-template-columns: 1fr; } .grid-2 { grid-template-columns: 1fr 1fr; } .grid-4 { grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; } }
        @media (max-width: 767px) { #chart-grid { grid-template-columns: 1fr !important; grid-template-rows: repeat(auto-fill, minmax(300px, 1fr)); overflow-y: auto; } .side-panel { position: fixed; right: 0; top: 0; height: 100%; width: 85% !important; z-index: 1000; } }
        .active-btn { background: #2962ff !important; color: white !important; }
        .side-panel { width: 320px; background: #131722; border-left: 1px solid #2a2e39; transition: 0.3s; display: flex; flex-direction: column; }
        .closed { transform: translateX(100%); width: 0; overflow: hidden; border-left: none; }
        .left-btn { width: 100%; padding: 12px 0; font-size: 10px; font-weight: 900; color: #5d606b; border-bottom: 1px solid #1e222d; transition: 0.2s; text-align: center; cursor: pointer; }
        .left-btn:hover { background: #2962ff; color: white; }
        /* Footer Stili */
        .footer-fixed { background: #0c0d10; border-top: 1px solid #1e222d; padding: 8px 15px; font-size: 10px; color: #5d606b; z-index: 50; }
        .footer-warning { color: #facc15; font-weight: bold; margin-right: 5px; }
    </style>
</head>
<body class="flex flex-col" onclick="initAudio()">

    <div class="h-8 shrink-0 bg-[#131722] border-b border-[#1e222d] overflow-hidden">
        <div class="tradingview-widget-container">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
            { "symbols": [{"proName": "CAPITALCOM:US100","title": "NAS100 CFD"},{"proName": "TVC:GOLD","title": "GOLD"},{"proName": "BINANCE:BTCUSDT","title": "BTC"}], "colorTheme": "dark", "isTransparent": true, "locale": "tr" }
            </script>
        </div>
    </div>

    <header class="px-4 py-2 bg-[#131722] border-b border-[#2a2e39] shrink-0">
        <div class="flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <h1 class="text-lg font-black italic text-white uppercase tracking-tighter">Trade Army <span class="text-blue-500 text-sm">V1</span></h1>
                <button onclick="window.open('https://www.tradingview.com/#signin', '_blank')" class="bg-[#2962ff] text-white text-[9px] px-3 py-1.5 rounded font-bold uppercase hover:bg-white hover:text-black transition shadow-lg border border-blue-400/50">
                    1. ADIM: TV HESABINI BAĞLA
                </button>
                <button onclick="location.reload()" class="bg-gray-800 text-gray-300 text-[9px] px-3 py-1.5 rounded font-bold uppercase border border-white/10 hover:bg-gray-700 transition">
                    2. ADIM: YENİLE
                </button>
            </div>
            
            <div class="flex items-center space-x-3">
                <div class="flex space-x-1 bg-black/40 p-1 rounded border border-white/10">
                    <button onclick="setLayout(1, this)" class="text-gray-500 px-3 py-1 rounded text-[10px] font-bold active-btn">1</button>
                    <button onclick="setLayout(2, this)" class="text-gray-500 px-3 py-1 rounded text-[10px] font-bold">2</button>
                    <button onclick="setLayout(4, this)" class="text-gray-500 px-3 py-1 rounded text-[10px] font-bold">4</button>
                </div>
                <button onclick="toggleSide()" class="bg-orange-600 text-white px-3 py-1.5 rounded text-[10px] font-black uppercase shadow-lg">ALARM ☰</button>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <aside class="w-14 md:w-16 bg-[#0c0d10] border-r border-[#1e222d] flex flex-col shrink-0">
            <button class="left-btn" onclick="setSym('CAPITALCOM:US100')">NAS<br>CFD</button>
            <button class="left-btn" onclick="setSym('TVC:GOLD')">XAU<br>USD</button>
            <button class="left-btn" onclick="setSym('TVC:SILVER')">XAG<br>USD</button>
            <button class="left-btn" onclick="setSym('FX:EURUSD')">EUR<br>USD</button>
            <button class="left-btn" onclick="setSym('BINANCE:BTCUSDT')">BTC<br>USDT</button>
        </aside>

        <main class="flex-1 bg-black overflow-hidden relative">
            <div id="chart-grid" class="grid-1 h-full w-full">
                <div id="tv_1" class="w-full h-full"></div>
                <div id="tv_2" class="w-full h-full hidden"></div>
                <div id="tv_3" class="w-full h-full hidden"></div>
                <div id="tv_4" class="w-full h-full hidden"></div>
            </div>
        </main>

        <aside id="side" class="side-panel closed shadow-2xl">
            <div class="p-4 flex-1 overflow-y-auto space-y-6">
                <section class="bg-black/40 p-3 rounded border border-white/5">
                    <h3 class="text-[10px] font-bold text-orange-500 uppercase mb-3 tracking-widest text-center">SINIRSIZ ALARM</h3>
                    <input type="text" id="aSym" placeholder="Sembol (US100...)" class="w-full bg-black border border-gray-800 rounded p-2 text-xs mb-2 outline-none text-blue-400 font-bold uppercase">
                    <input type="number" id="aPrice" step="any" placeholder="Fiyat" class="w-full bg-black border border-gray-800 rounded p-2 text-xs mb-2 outline-none text-yellow-500 font-bold">
                    <button onclick="addAlarm()" class="w-full bg-orange-600 text-white py-2 rounded text-[10px] font-black uppercase">ALARM EKLE</button>
                    <div id="alarmList" class="mt-4 space-y-1"></div>
                </section>
                
                <section>
                    <h3 class="text-[10px] font-bold text-blue-500 uppercase mb-2">TEKNİK ÖZET</h3>
                    <div id="tech" class="h-40 overflow-hidden"></div>
                </section>
            </div>
        </aside>
    </div>

    <footer class="footer-fixed flex flex-col md:flex-row justify-between items-center gap-2">
        <div>
            <span class="footer-warning">YASAL UYARI:</span> 
            Burada yer alan yatırım bilgi, yorum ve tavsiyeleri yatırım danışmanlığı kapsamında değildir. Bu bilgiler mali durumunuz ile risk ve getiri tercihlerinize uygun olmayabilir.
        </div>
        <div class="text-white/30 italic">Trade Army V1 Terminal &copy; 2024</div>
    </footer>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let config = { layout: 1, symbol: 'CAPITALCOM:US100' };
        let alarms = JSON.parse(localStorage.getItem('army_alarms_v1')) || [];
        let audioOk = false;

        function initAudio() { audioOk = true; }
        function speak(t) { if(audioOk) { let m = new SpeechSynthesisUtterance(t); m.lang='tr-TR'; window.speechSynthesis.speak(m); } }

        function initTV(id, sym) {
            new TradingView.widget({
                "autosize": true, "symbol": sym, "interval": "15", "theme": "dark", "style": "1", "locale": "tr",
                "toolbar_bg": "#131722", "enable_publishing": false, "withdateranges": true, "allow_symbol_change": true,
                "container_id": id, "remember_last_used_chart": true,
                "charts_storage_url": "https://saveload.tradingview.com", "charts_storage_api_version": "1.1",
                "client_id": "tradingview.com", "user_id": "public_user_id",
                "enabled_features": ["study_templates", "header_saveload", "use_localstorage_for_settings_save", "header_widget_dom_node", "auto_save_and_load_chart"]
            });
            updateSide(sym);
        }

        function addAlarm() {
            let s = document.getElementById('aSym').value.toUpperCase() || config.symbol;
            let p = parseFloat(document.getElementById('aPrice').value);
            if(!p) return;
            alarms.push({ id: Date.now(), sym: s, price: p });
            localStorage.setItem('army_alarms_v1', JSON.stringify(alarms));
            renderAlarms();
            speak(s + " alarmı eklendi.");
        }

        function renderAlarms() {
            document.getElementById('alarmList').innerHTML = alarms.map(a => `
                <div class="p-2 bg-white/5 flex justify-between items-center rounded text-[10px] text-white">
                    <span>${a.sym} @ ${a.price}</span>
                    <button onclick="removeAlarm(${a.id})" class="text-red-500 font-bold px-1">SİL</button>
                </div>
            `).join('');
        }

        function removeAlarm(id) {
            alarms = alarms.filter(a => a.id !== id);
            localStorage.setItem('army_alarms_v1', JSON.stringify(alarms));
            renderAlarms();
        }

        function setLayout(n, btn) {
            config.layout = n;
            document.getElementById('chart-grid').className = `grid-${n}`;
            document.querySelectorAll('header button').forEach(b => b.classList.remove('active-btn'));
            if(btn) btn.classList.add('active-btn');
            for (let i = 1; i <= 4; i++) {
                const el = document.getElementById(`tv_${i}`);
                if (i <= n) { el.classList.remove('hidden'); initTV(`tv_${i}`, config.symbol); }
                else { el.classList.add('hidden'); el.innerHTML = ""; }
            }
        }

        function setSym(s) {
            config.symbol = s;
            document.getElementById('aSym').value = s;
            for (let i = 1; i <= config.layout; i++) {
                const el = document.getElementById(`tv_${i}`);
                if (!el.classList.contains('hidden')) initTV(`tv_${i}`, s);
            }
        }

        function updateSide(sym) {
            const container = document.getElementById('tech');
            container.innerHTML = "";
            const sc = document.createElement('script'); sc.type = 'text/javascript'; sc.src = 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js'; sc.async = true;
            sc.innerHTML = JSON.stringify({ "interval": "1h", "width": "100%", "isTransparent": true, "height": "100%", "symbol": sym, "showIntervalTabs": false, "locale": "tr", "colorTheme": "dark" });
            container.appendChild(sc);
        }

        function toggleSide() { document.getElementById('side').classList.toggle('closed'); }
        window.onload = () => { setLayout(1); renderAlarms(); };
    </script>
</body>
</html>
