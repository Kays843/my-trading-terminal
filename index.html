<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRADE ARMY V1 | INTERNAL SELECTOR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html, body { background: #08090d; margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; color: #d1d4dc; font-family: sans-serif; }
        #chart-grid { display: grid; height: 100%; width: 100%; gap: 1px; background: #1e222d; }
        
        /* Ekran DÃ¼zenleri */
        @media (min-width: 768px) {
            .grid-1 { grid-template-columns: 1fr; }
            .grid-2 { grid-template-columns: 1fr 1fr; }
            .grid-3 { grid-template-columns: 1fr 1fr 1fr; }
            .grid-4 { grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; }
        }
        
        /* Mobil: Grafiklerin sÄ±ÄŸmasÄ± iÃ§in alt alta */
        @media (max-width: 767px) {
            #chart-grid { grid-template-columns: 1fr !important; grid-template-rows: repeat(auto-fill, minmax(350px, 1fr)); overflow-y: auto; }
            .side-panel { position: fixed; right: 0; top: 0; height: 100%; width: 85% !important; z-index: 1000; }
        }

        .active-btn { background: #2962ff !important; color: white !important; }
        .header-bg { background: #131722; border-bottom: 1px solid #2a2e39; }
        .side-panel { width: 380px; background: #131722; border-left: 1px solid #2a2e39; transition: 0.3s; display: flex; flex-direction: column; }
        .closed { transform: translateX(100%); width: 0; overflow: hidden; border-left: none; }
        .footer-bar { background: #131722; color: #5d606b; font-size: 10px; padding: 10px; text-align: center; border-top: 1px solid #2a2e39; shrink-0; }
    </style>
</head>
<body class="flex flex-col">

    <div class="h-10 shrink-0 bg-[#131722] border-b border-[#1e222d]">
        <div class="tradingview-widget-container">
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
            { "symbols": [
                {"proName": "NASDAQ:NAS100", "title": "NAS100"},
                {"proName": "FX:EURUSD", "title": "EUR/USD"},
                {"proName": "TVC:GOLD", "title": "XAU/USD"},
                {"proName": "BINANCE:BTCUSDT", "title": "BTC/USDT"}
            ], "showSymbolLogo": true, "colorTheme": "dark", "isTransparent": true, "locale": "tr" }
            </script>
        </div>
    </div>

    <header class="p-3 md:p-4 header-bg shrink-0">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3 md:space-x-4">
                <h1 class="text-xl md:text-2xl font-black italic text-white uppercase tracking-tighter">Trade Army <span class="text-blue-500">V1</span></h1>
                <a href="https://www.tradingview.com/accounts/signin/" target="_blank" class="bg-[#2962ff] text-white text-[10px] px-3 py-1.5 rounded font-bold uppercase transition hover:bg-white hover:text-black">ðŸ”‘ TV GÄ°RÄ°Åž</a>
            </div>
            
            <div class="flex items-center space-x-2">
                <div class="flex space-x-1 bg-black/40 p-1 rounded border border-white/5">
                    <button onclick="setLayout(1, this)" class="text-gray-400 px-3 md:px-4 py-1 rounded text-xs font-bold active-btn">1</button>
                    <button onclick="setLayout(2, this)" class="text-gray-400 px-3 md:px-4 py-1 rounded text-xs font-bold">2</button>
                    <button onclick="setLayout(3, this)" class="text-gray-400 px-3 md:px-4 py-1 rounded text-xs font-bold">3</button>
                    <button onclick="setLayout(4, this)" class="text-gray-400 px-3 md:px-4 py-1 rounded text-xs font-bold">4</button>
                </div>
                <button onclick="toggleSide()" class="bg-[#2a2e39] text-white px-3 py-2 rounded-lg text-xs font-bold">â˜°</button>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden relative">
        <main class="flex-1 bg-black overflow-hidden">
            <div id="chart-grid" class="grid-1 h-full w-full">
                <div id="tv_1" class="w-full h-full"></div>
                <div id="tv_2" class="w-full h-full hidden"></div>
                <div id="tv_3" class="w-full h-full hidden"></div>
                <div id="tv_4" class="w-full h-full hidden"></div>
            </div>
        </main>

        <aside id="side" class="side-panel closed shadow-2xl">
            <div class="p-4 flex-1 overflow-y-auto space-y-6">
                <div class="flex justify-between items-center md:hidden">
                    <h2 class="text-white font-bold">BÃ¼lten</h2>
                    <button onclick="toggleSide()" class="text-red-500 text-xl font-bold">Ã—</button>
                </div>
                <section>
                    <h3 class="text-[10px] font-bold text-blue-500 uppercase mb-3 px-1">Teknik Analiz</h3>
                    <div id="tech-summary" class="h-64 rounded bg-black/30 border border-white/5 overflow-hidden"></div>
                </section>
                <section>
                    <h3 class="text-[10px] font-bold text-orange-500 uppercase mb-3 px-1">Haber AkÄ±ÅŸÄ±</h3>
                    <div class="h-96 rounded bg-black/30 border border-white/5 overflow-hidden">
                        <div class="tradingview-widget-container">
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js" async>
                            { "feedMode": "all_symbols", "colorTheme": "dark", "isTransparent": true, "displayMode": "regular", "width": "100%", "height": "100%", "locale": "tr" }
                            </script>
                        </div>
                    </div>
                </section>
            </div>
        </aside>
    </div>

    <footer class="footer-bar">
        YATIRIM TAVSÄ°YESÄ° DEÄžÄ°LDÄ°R â€¢ PARÄ°TEYÄ° GRAFÄ°ÄžÄ°N SOL ÃœSTÃœNDEKÄ° Ä°SME TIKLAYARAK DEÄžÄ°ÅžTÄ°RÄ°N
    </footer>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        let config = { layout: 1, symbol: 'NASDAQ:NAS100' };

        function initTV(id, sym) {
            new TradingView.widget({
                "autosize": true,
                "symbol": sym,
                "interval": "15",
                "theme": "dark",
                "style": "1",
                "locale": "tr",
                "toolbar_bg": "#131722",
                "enable_publishing": true,
                "withdateranges": true,
                "hide_side_toolbar": false,
                "allow_symbol_change": true, // BU AYAR GRAFÄ°K Ä°Ã‡Ä°NDEN SEÃ‡Ä°MÄ° AÃ‡AR
                "container_id": id,
                "remember_last_used_chart": true,
                "charts_storage_url": "https://saveload.tradingview.com",
                "charts_storage_api_version": "1.1",
                "client_id": "tradingview.com",
                "user_id": "public_user_id",
                "enabled_features": ["study_templates", "header_saveload", "use_localstorage_for_settings_save", "header_widget_dom_node", "auto_save_and_load_chart"]
            });
            // Teknik analizi gÃ¼ncellemek iÃ§in widget dinleyicisi eklenemediÄŸi iÃ§in 
            // manuel seÃ§imde teknik analiz o anki ana sembole odaklÄ± kalÄ±r.
        }

        function setLayout(n, btn) {
            config.layout = n;
            document.getElementById('chart-grid').className = `grid-${n}`;
            if(btn) {
                document.querySelectorAll('header button').forEach(b => b.classList.remove('active-btn'));
                btn.classList.add('active-btn');
            }
            for (let i = 1; i <= 4; i++) {
                const el = document.getElementById(`tv_${i}`);
                if (i <= n) { 
                    el.classList.remove('hidden'); 
                    initTV(`tv_${i}`, config.symbol); 
                } else { 
                    el.classList.add('hidden'); 
                    el.innerHTML = ""; 
                }
            }
        }

        function toggleSide() { document.getElementById('side').classList.toggle('closed'); }
        window.onload = () => { setLayout(1); };
    </script>
</body>
</html>
